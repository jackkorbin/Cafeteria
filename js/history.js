var arrayofselecteditems=[];function update_arrayofselecteditems(c,a,b){arrayofselecteditems.push({name:c,quantity:a,cost:b})}
function updatehistory(){var c="",a="",b="",f=0,h=0,k=1,e;for(e in window.localStorage){console.log(e);e=$.trim(e);var g=JSON.parse(window.localStorage.getItem(e));if(-1!=e.indexOf(" ")){var k=0,d=e.split(" "),l=coverttotime(d[4]);id=e.replace(/[: ()+]/g,"");a+='<div class="onedate" id="historytab'+id+'">';a+='<div class="fooditem fooditem-date" id="color'+id+'">';a+='<span class="glyphicon glyphicon-trash delhis" onclick=\'delhistory("'+e+"\")'></span>";a+='<span class="name" id="name">'+l+" "+d[2]+
" "+d[1]+" "+d[3]+'</span><span class="cost" id="cost">';b+=' Rs</span><span class="glyphicon glyphicon-chevron-down icon"></span></div>';b+='<div class="fooditem-subs-cont">';for(d=0;d<g.length;d++)b+='<div class="fooditem-subs"><span class="name">'+g[d].name+" x "+g[d].quantity+'</span><span class="cost">'+g[d].cost+" Rs</span></div>",f+=g[d].cost;b+="</div>";b+="</div>";h+=f;c+=a+f+b;b=a="";f=0}}1==k&&(c='<div class="fooditem no-margin"><span class="name" id="name">No Saved History!<br>Are you sure you clicked save button after confirming the menu?</span></div>');
$("#history").html(c);totaldiv='<div class="fooditem total-css"><span class="name" id="name">Total</span><span class="cost" id="cost">'+h+" Rs</span></div>";$("#total-money").html(totaldiv);changehistorycolor();$("#history").scrollTop($("#history")[0].scrollHeight)}function changehistorycolor(){var c=-1,a;for(a in window.localStorage){var c=checkcolorrepeat(c),b=b="color"+a.replace(/[: ()+]/g,"");$("#"+b).css("background-color",categorycolors[c])}}
function checkcolorrepeat(c){var a=Math.ceil(500*Math.random())%categorycolors.length;a==c&&(a=checkcolorrepeat(c));return a}function savehistory(){0==arrayofselecteditems.length?alert("No Items to save!"):(window.localStorage.setItem(window.localStorage.length+1+new Date,JSON.stringify(arrayofselecteditems)),alert("Saved!"))}function clearhistory(){window.localStorage.clear();arrayofselecteditems=[]}
function delhistory(c){confirm("Delete this history?")&&(window.localStorage.removeItem(c),updatehistory())};